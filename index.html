<!doctype html>
<html lang="ru">
	<head>
		<script src="//vk.com/js/api/openapi.js?117"></script>
		<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
	</head>
	<body>
		<input type="text" class="form-control" id="inputUser" placeholder="Ссылку на пользователя или сообщество...">
		<input type="submit" value="Найти" onClick="login();">
		<div id="wall"></div>

		<script type="text/javascript">
			VK.init({
  			apiId: 5322127
			});
			alert("Я работаю");
			function login() {
				var user_id = document.getElementById('inputUser').value;
				if (user_id.indexOf("com/") >= 0)
					user_id = user_id.split('com/')[1];
				VK.Api.call('utils.resolveScreenName', {screen_name: user_id, v: '5.27'}, function(r) {
					if(r.response) 
					{
						alert(""+user_id);
						wall(user_id);
					}
					else{
					alert(""+user_id);	
					}
				}
			});	
			}
			function wall(user_id){
				var code;
				code = 'return {';
				code += 'data: API.wall.get({owner_id:'+user_id', count: 100, v: 5.37})';
				code += '};';
				// сам метод execute, выполняет созданный код
				VK.Api.call('execute', {code: code, v: "5.37"}, function(r){
					  if (r.response){
					  	if (r.response.data){
					  	for (var i = 0; i < r.response.data.count; i++)
					  		{
					  			var z=document.getElementById("wall");
					  			z.innerHTML+=r.response.data.items[i].text+"<br/> <br/>";
					  		}
					          
					   	}
					   }
				});
			}
		</script>
	</body>
</html>
